# Foodie Friends

Team members: Chenyu Jiang, Yihe Xiong

## Data Model
In this app, we will use 3 collections: users, reviews/posts, and meet-ups collections. All Ids will be automatically generated by the firestore database except the restaurantId will be fetched from the API.

1. Users Collection
   
Purpose: Stores user information and preferences to personalize recommendations and keep track of user activities.

Fields:
- name: User's display name.
- email: User's email for login and notifications.
- profilePhoto: URL of the user's profile picture.

2. Reviews Collection
   
Purpose: Stores reviews written by users for specific restaurants.

Fields:
- userId: ID of the user who wrote the review (for linking to Users collection).
- restaurantId: ID of the restaurant being reviewed (for linking to Restaurants collection).
- rating: Star rating given by the user.
- reviewText: Text content of the review.
- photos: Array of image URLs if the user uploads meal photos.
- time: Date and time when the review was created.

3. Meet-ups Collection
   
Purpose: Stores information about organized meetups, allowing users to connect with friends and arrange group dining events.

Fields:
- restaurantId: ID of the restaurant where the meetup is taking place (links to Restaurants collection).
- Owner: ID of the user who created the meetup (links to Users collection).
- dateTime: Date and time of the meetup.
- details: Additional details or comments about the meetup (e.g., "Celebrate John's birthday" or "Try the new sushi menu").

## Implementation of CRUD operations
1. Users Collection
- Create: When a new user signs up, a user profile is created with information like email.
- Read: Retrieve user information for profile display.
- Update: Users can update their profile information (e.g.update profile photo). 

2. Restaurants Collection
- Create: Restaurants are fetched from an external API (like Yelp) and stored in the database for fast access.
- Read: Display restaurant details (name, location, rating, photos, reviews) on the app, especially in searches and map views.
- Update: Occasionally update restaurant information (like rating or hours) to ensure data accuracy. The updates might come from periodic API calls.

3. Reviews Collection
- Create: Users can write and add new reviews, including rating, text, and photos, for a specific restaurant.
- Read: Display reviews on the restaurant page or in user profiles, allowing other users to view shared experiences and recommendations.
- Update: Users can edit their own reviews to update the rating or content as needed.
- Delete: Users have the option to delete their own reviews if they no longer wish to share them.

4. Meetups Collection
- Create: Users can create a new meetup by selecting a restaurant, adding notes, and setting a date and time.
- Read: Display meetup information for participants, including date, location, and any additional notes, on their profile page.
- Update: The organizer or participants can update the upcoming meetup details, such as changing the time and restaurant, and adding notes..
- Delete: The organizer can cancel or delete the meetup if plans change.

## Iteration 1
At the end of iteration 1, we have React Native components created to represent the functionality we will be building, and the overall structure of the app is in place.We also have navigation and the basis of CRUD operations to Firestore established and working.

### Map Screen 
<img src="https://github.com/user-attachments/assets/546e7fea-f25c-4a82-afad-bff31622399b" alt="Map Screen" width="400">

### Home Screen
<img src="" alt="Home Screen" width="400">

### Edit Post Screen
<img src="./Demo/EditPostScreen.png" alt="Edit Post Screen" width="400">

### Profile Screen
<img src="./Demo/ProfileScreen.png" alt="Profile Screen" width="400">

### Settings Screen
<img src="https://github.com/user-attachments/assets/25ee8e21-83c5-45de-94ac-3dfa40e504f3" alt="Settings Screen" width="400">

### Sign Up Screen
<img src="./Demo/SignUpScreen.png" alt=" Sign Up Screen" width="400">

### Log In Screen
<img src="./Demo/LogInScreen.png" alt=" Log In Screen" width="400">

### Food Gallery Screen
<img src="./Demo/FoodGalleryScreen.png" alt=" Food Gallery Screen" width="400">


### Contributions
Chenyu has worked on below aspects:
- Front-end: Built Map, Home, Settings, Meet-up, Edit Meetup, and Support screens.
- Back-end: Set up the Firestore database online and in the project. Set up Google API credentials. 
- Code walk video: https://northeastern-my.sharepoint.com/:v:/g/personal/jiang_chenyu_northeastern_edu/EZ3T6eKgmppMvFlWFtGMy2sBNzifhwFPBL1OlKohwX1SXw?nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJTdHJlYW1XZWJBcHAiLCJyZWZlcnJhbFZpZXciOiJTaGFyZURpYWxvZy1MaW5rIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXcifX0%3D&e=VvdXqt

Yihe has worked on below aspects:
- Front-end: Built Edit Post, Home, Profile, Sign Up, Log In, and Food Gallery screens.
- Back-end: Set up the Firestore authentication online and in the project, modified Firestore database online and in the project. 
- Code walk video: https://drive.google.com/file/d/1al7BHpT1PxIm4SWF27_FDa5Vr35Ldics/view?usp=drive_link

## Iteration 2
At the end of iteration 2, we have implemented Authentication, Camera use, Location use, Notification, and External API use.

1. External API key:
  ```
  EXPO_PUBLIC_apiKey= "AIzaSyD1jrEUDZFEvyMzjUWvc-WKnFogdT6178M"
  ```
2. Firebase rules
   ```
   rules_version = '2';
   
   service cloud.firestore {
     match /databases/{database}/documents {
   
       // Apply these rules to the posts collection
       match /posts/{post} {
         allow read: if true;  // Public read access
         // Allow authenticated users to read, update, and delete their own posts
         allow update, delete: if request.auth != null && request.auth.uid == resource.data.owner;
         // Allow authenticated users to create posts
         allow create: if request.auth != null;
       }
       
       // This allows general access to other documents but restricts access based on authentication
       match /{document=**} {
         allow read, write: if request.auth != null;
       }
     }
   }
   ```

### Home Screen
<img src="https://github.com/user-attachments/assets/8fbe4f75-ac16-45da-a2b5-057f0d762d57" width="400">

### Edit Post Screen
<img src="./Demo/EditPostScreen2.png" alt="Edit Post Screen" width="400">

### Profile Screen
<img src="./Demo/ProfileScreen2.png" alt="Profile Screen" width="400">

### Notification
<img src="https://github.com/user-attachments/assets/02b74c21-8bf0-445d-b81e-5d63bdc8636c" width="400">

### Contributions
Chenyu has worked on below aspects:
- Front-end: Implemented API use in Map and Edit Meet Up screens, implemented refresh function in home screen, implemented notification in Edit Meet Up Screen
- Back-end: Enabled image upload to Firebase.
- Code walk video: https://northeastern-my.sharepoint.com/:v:/g/personal/jiang_chenyu_northeastern_edu/EVcx_zYdX3pMi9iUK5G7mQABBbFP491k3arD6jcdlFDLmw?e=b2Lnoj 

Yihe has worked on below aspects:
- Front-end: Modified Login Screen and Signup Screen to be professional, Home Screen, EditPost Screen, Profile Screen(details in the video)
- Code walk video: https://drive.google.com/file/d/1DLFMA3OeFjV9BZdu14F0brozRR9aPpV5/view?usp=drive_link

## Current State of the App - Iteration 3
At the end of iteration 3, we worked on tasks with the lowest priorities.

### Contributions
Chenyu has worked on below aspects:
- Implemented multiple markers rendering, zoom-in/out and locate buttons on map scree, updated the profile screen to upload profile info to the db, combined data from db and api to render together to the user, modified on post fields, implemented refresh function on home screen and enable meet-up screen to auto refresh every 5s, refactoring components and stylings.
- Code walk video: https://northeastern-my.sharepoint.com/:v:/g/personal/jiang_chenyu_northeastern_edu/EdGVbpJxslFEvG9Dc2rXy8sBEYrXCKSXQOb_kMDG2r9b-w?nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJTdHJlYW1XZWJBcHAiLCJyZWZlcnJhbFZpZXciOiJTaGFyZURpYWxvZy1MaW5rIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXcifX0%3D&e=OTv6tl

Yihe has worked on below aspects:
- Created users data collection; Created ImageItem component and ImagePickerHandler component; Made sure the profile images are uploaded to the Storage instead of being saved locally; Fixed the issue when user logged out, the Firestore listeners are still active.
- Code walk video: https://drive.google.com/file/d/1vzPagJzyF85QzLyq__Qyxkn57iocNFvl/view?usp=drive_link
